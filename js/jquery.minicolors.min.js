!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(s){function o(i){var t=i.parent();i.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(i).remove()}function n(i){var t=i.parent(),o=t.find(".minicolors-panel"),n=i.data("minicolors-settings");!i.data("minicolors-initialized")||i.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(a(),t.addClass("minicolors-focus"),o.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(i.get(0))}))}function a(){s(".minicolors-focus").each(function(){var i=s(this),t=i.find(".minicolors-input"),o=i.find(".minicolors-panel"),n=t.data("minicolors-settings");o.fadeOut(n.hideSpeed,function(){n.hide&&n.hide.call(t.get(0)),i.removeClass("minicolors-focus")})})}function e(i,t,o){var n,s,a,e,r=i.parents(".minicolors").find(".minicolors-input"),c=r.data("minicolors-settings"),l=i.find("[class$=-picker]"),h=i.offset().left,d=i.offset().top,u=Math.round(t.pageX-h),g=Math.round(t.pageY-d),p=o?c.animationSpeed:0;t.originalEvent.changedTouches&&(u=t.originalEvent.changedTouches[0].pageX-h,g=t.originalEvent.changedTouches[0].pageY-d),u<0&&(u=0),g<0&&(g=0),u>i.width()&&(u=i.width()),g>i.height()&&(g=i.height()),i.parent().is(".minicolors-slider-wheel")&&l.parent().is(".minicolors-grid")&&(n=75-u,s=75-g,a=Math.sqrt(n*n+s*s),(e=Math.atan2(s,n))<0&&(e+=2*Math.PI),75<a&&(u=(a=75)-75*Math.cos(e),g=75-75*Math.sin(e)),u=Math.round(u),g=Math.round(g)),i.is(".minicolors-grid")?l.stop(!0).animate({top:g+"px",left:u+"px"},p,c.animationEasing,function(){m(r,i)}):l.stop(!0).animate({top:g+"px"},p,c.animationEasing,function(){m(r,i)})}function m(i,t){function o(i,t){var o,n;return i.length&&t?(o=i.offset().left,n=i.offset().top,{x:o-t.offset().left+i.outerWidth()/2,y:n-t.offset().top+i.outerHeight()/2}):null}var n,s,a,e,r,c,l,h=i.val(),d=i.attr("data-opacity"),u=i.parent(),g=i.data("minicolors-settings"),p=u.find(".minicolors-swatch"),m=u.find(".minicolors-grid"),f=u.find(".minicolors-slider"),v=u.find(".minicolors-opacity-slider"),b=m.find("[class$=-picker]"),y=f.find("[class$=-picker]"),M=v.find("[class$=-picker]"),w=o(b,m),x=o(y,f),C=o(M,v);if(t.is(".minicolors-grid, .minicolors-slider")){switch(g.control){case"wheel":e=m.width()/2-w.x,r=m.height()/2-w.y,c=Math.sqrt(e*e+r*r),(l=Math.atan2(r,e))<0&&(l+=2*Math.PI),75<c&&(c=75,w.x=69-75*Math.cos(l),w.y=69-75*Math.sin(l)),s=z(c/.75,0,100),h=D({h:n=z(180*l/Math.PI,0,360),s:s,b:a=z(100-Math.floor(x.y*(100/f.height())),0,100)}),f.css("backgroundColor",D({h:n,s:s,b:100}));break;case"saturation":h=D({h:n=z(parseInt(w.x*(360/m.width()),10),0,360),s:s=z(100-Math.floor(x.y*(100/f.height())),0,100),b:a=z(100-Math.floor(w.y*(100/m.height())),0,100)}),f.css("backgroundColor",D({h:n,s:100,b:a})),u.find(".minicolors-grid-inner").css("opacity",s/100);break;case"brightness":h=D({h:n=z(parseInt(w.x*(360/m.width()),10),0,360),s:s=z(100-Math.floor(w.y*(100/m.height())),0,100),b:a=z(100-Math.floor(x.y*(100/f.height())),0,100)}),f.css("backgroundColor",D({h:n,s:s,b:100})),u.find(".minicolors-grid-inner").css("opacity",1-a/100);break;default:h=D({h:n=z(360-parseInt(x.y*(360/f.height()),10),0,360),s:s=z(Math.floor(w.x*(100/m.width())),0,100),b:a=z(100-Math.floor(w.y*(100/m.height())),0,100)}),m.css("backgroundColor",D({h:n,s:100,b:100}))}i.val(S(h,g.letterCase))}t.is(".minicolors-opacity-slider")&&(d=g.opacity?parseFloat(1-C.y/v.height()).toFixed(2):1,g.opacity&&i.attr("data-opacity",d)),p.find("SPAN").css({backgroundColor:h,opacity:d}),k(i,h,d)}function r(i,t){var o,n,s,a,e,r,c,l=i.parent(),h=i.data("minicolors-settings"),d=l.find(".minicolors-swatch"),u=l.find(".minicolors-grid"),g=l.find(".minicolors-slider"),p=l.find(".minicolors-opacity-slider"),m=u.find("[class$=-picker]"),f=g.find("[class$=-picker]"),v=p.find("[class$=-picker]");switch((o=S(b(i.val(),!0),h.letterCase))||(o=S(b(h.defaultValue,!0),h.letterCase)),n=function(i){var t=function(i){var t={h:0,s:0,b:0},o=Math.min(i.r,i.g,i.b),n=Math.max(i.r,i.g,i.b),s=n-o;return t.b=n,t.s=0!==n?255*s/n:0,t.h=0!==t.s?i.r===n?(i.g-i.b)/s:i.g===n?2+(i.b-i.r)/s:4+(i.r-i.g)/s:-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}(y(i));return 0===t.s&&(t.h=360),t}(o),t||i.val(o),h.opacity&&(s=""===i.attr("data-opacity")?1:z(parseFloat(i.attr("data-opacity")).toFixed(2),0,1),isNaN(s)&&(s=1),i.attr("data-opacity",s),d.find("SPAN").css("opacity",s),e=z(p.height()-p.height()*s,0,p.height()),v.css("top",e+"px")),d.find("SPAN").css("backgroundColor",o),h.control){case"wheel":r=z(Math.ceil(.75*n.s),0,u.height()/2),c=n.h*Math.PI/180,a=z(75-Math.cos(c)*r,0,u.width()),e=z(75-Math.sin(c)*r,0,u.height()),m.css({top:e+"px",left:a+"px"}),e=150-n.b/(100/u.height()),""===o&&(e=0),f.css("top",e+"px"),g.css("backgroundColor",D({h:n.h,s:n.s,b:100}));break;case"saturation":a=z(5*n.h/12,0,150),e=z(u.height()-Math.ceil(n.b/(100/u.height())),0,u.height()),m.css({top:e+"px",left:a+"px"}),e=z(g.height()-n.s*(g.height()/100),0,g.height()),f.css("top",e+"px"),g.css("backgroundColor",D({h:n.h,s:100,b:n.b})),l.find(".minicolors-grid-inner").css("opacity",n.s/100);break;case"brightness":a=z(5*n.h/12,0,150),e=z(u.height()-Math.ceil(n.s/(100/u.height())),0,u.height()),m.css({top:e+"px",left:a+"px"}),e=z(g.height()-n.b*(g.height()/100),0,g.height()),f.css("top",e+"px"),g.css("backgroundColor",D({h:n.h,s:n.s,b:100})),l.find(".minicolors-grid-inner").css("opacity",1-n.b/100);break;default:a=z(Math.ceil(n.s/(100/u.width())),0,u.width()),e=z(u.height()-Math.ceil(n.b/(100/u.height())),0,u.height()),m.css({top:e+"px",left:a+"px"}),e=z(g.height()-n.h/(360/g.height()),0,g.height()),f.css("top",e+"px"),u.css("backgroundColor",D({h:n.h,s:100,b:100}))}i.data("minicolors-initialized")&&k(i,o,s)}function k(i,t,o){var n=i.data("minicolors-settings"),s=i.data("minicolors-lastChange");s&&s.hex===t&&s.opacity===o||(i.data("minicolors-lastChange",{hex:t,opacity:o}),n.change&&(n.changeDelay?(clearTimeout(i.data("minicolors-changeTimeout")),i.data("minicolors-changeTimeout",setTimeout(function(){n.change.call(i.get(0),t,o)},n.changeDelay))):n.change.call(i.get(0),t,o)),i.trigger("change").trigger("input"))}function S(i,t){return"uppercase"===t?i.toUpperCase():i.toLowerCase()}function b(i,t){return 3!==(i=i.replace(/[^A-F0-9]/gi,"")).length&&6!==i.length?"":(3===i.length&&t&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),"#"+i)}function z(i,t,o){return i<t&&(i=t),o<i&&(i=o),i}function D(i){return function(i){var o=[i.r.toString(16),i.g.toString(16),i.b.toString(16)];return s.each(o,function(i,t){1===t.length&&(o[i]="0"+t)}),"#"+o.join("")}(function(i){var t={},o=Math.round(i.h),n=Math.round(255*i.s/100),s=Math.round(255*i.b/100);if(0===n)t.r=t.g=t.b=s;else{var a=s,e=(255-n)*s/255,r=o%60*(a-e)/60;360===o&&(o=0),o<60?(t.r=a,t.b=e,t.g=e+r):o<120?(t.g=a,t.b=e,t.r=a-r):o<180?(t.g=a,t.r=e,t.b=e+r):o<240?(t.b=a,t.r=e,t.g=a-r):o<300?(t.b=a,t.g=e,t.r=e+r):o<360?(t.r=a,t.g=e,t.b=a-r):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}(i))}function y(i){return{r:(i=parseInt(-1<i.indexOf("#")?i.substring(1):i,16))>>16,g:(65280&i)>>8,b:255&i}}s.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}},s.extend(s.fn,{minicolors:function(i,t){switch(i){case"destroy":return s(this).each(function(){o(s(this))}),s(this);case"hide":return a(),s(this);case"opacity":return void 0===t?s(this).attr("data-opacity"):(s(this).each(function(){r(s(this).attr("data-opacity",t))}),s(this));case"rgbObject":return function(i){var t=y(b(s(i).val(),!0)),o=s(i).attr("data-opacity");return t?(void 0!==o&&s.extend(t,{a:parseFloat(o)}),t):null}(s(this));case"rgbString":case"rgbaString":return function(i,t){var o=y(b(s(i).val(),!0)),n=s(i).attr("data-opacity");return o?(void 0===n&&(n=1),t?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(n)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):null}(s(this),"rgbaString"===i);case"settings":return void 0===t?s(this).data("minicolors-settings"):(s(this).each(function(){var i=s(this).data("minicolors-settings")||{};o(s(this)),s(this).minicolors(s.extend(!0,i,t))}),s(this));case"show":return n(s(this).eq(0)),s(this);case"value":return void 0===t?s(this).val():(s(this).each(function(){r(s(this).val(t))}),s(this));default:return"create"!==i&&(t=i),s(this).each(function(){!function(t,i){var o=s('<div class="minicolors" />'),n=s.minicolors.defaults;t.data("minicolors-initialized")||(i=s.extend(!0,{},n,i),o.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity).toggleClass("minicolors-no-data-uris",!0!==i.dataUris),void 0!==i.position&&s.each(i.position.split(" "),function(){o.addClass("minicolors-position-"+this)}),t.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",7).wrap(o).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),i.inline||(t.after('<span class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></span>'),t.next(".minicolors-swatch").on("click",function(i){i.preventDefault(),t.focus()})),t.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),i.inline&&t.parent().addClass("minicolors-inline"),r(t,!1),t.data("minicolors-initialized",!0))}(s(this),t)}),s(this)}}}),s(document).on("mousedown.minicolors touchstart.minicolors",function(i){s(i.target).parents().add(i.target).hasClass("minicolors")||a()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(i){var t=s(this);i.preventDefault(),s(document).data("minicolors-target",t),e(t,i,!0)}).on("mousemove.minicolors touchmove.minicolors",function(i){var t=s(document).data("minicolors-target");t&&e(t,i)}).on("mouseup.minicolors touchend.minicolors",function(){s(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(i){var t=s(this).parent().find(".minicolors-input");i.preventDefault(),n(t)}).on("focus.minicolors",".minicolors-input",function(){var i=s(this);i.data("minicolors-initialized")&&n(i)}).on("blur.minicolors",".minicolors-input",function(){var i=s(this),t=i.data("minicolors-settings");i.data("minicolors-initialized")&&(i.val(b(i.val(),!0)),""===i.val()&&i.val(b(t.defaultValue,!0)),i.val(S(i.val(),t.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(i){var t=s(this);if(t.data("minicolors-initialized"))switch(i.keyCode){case 9:a();break;case 13:case 27:a(),t.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var i=s(this);i.data("minicolors-initialized")&&r(i,!0)}).on("paste.minicolors",".minicolors-input",function(){var i=s(this);i.data("minicolors-initialized")&&setTimeout(function(){r(i,!0)},1)})});